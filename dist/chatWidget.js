!function(){const n=document.createElement("style");n.innerHTML="\n    .bizzai-chat-button {\n      position: fixed;\n      bottom: 30px;\n      right: 30px;\n      z-index: 9999;\n      width: 60px;\n      height: 60px;\n      background-color: var(--bizzai-color, #4CAF50);\n      border-radius: 50%;\n      box-shadow: 0 4px 8px rgba(0,0,0,0.2);\n      color: white;\n      font-size: 30px;\n      text-align: center;\n      line-height: 60px;\n      cursor: pointer;\n    }\n    .bizzai-chat-box {\n      position: fixed;\n      bottom: 20px;\n      right: 20px;\n      width: var(--bizzai-width, 320px);\n      height: var(--bizzai-height, 400px);\n      border: 1px solid #ccc;\n      border-radius: 20px;\n      background: white;\n      display: none;\n      flex-direction: column;\n      box-shadow: 0 6px 16px rgba(0,0,0,0.3);\n      overflow: hidden;\n      font-family: sans-serif;\n      z-index: 9999;\n    }\n    .bizzai-chat-header {\n      background: white;\n      color: var(--bizzai-color, #4CAF50);\n      padding: 14px 10px;\n      font-weight: 600;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      border-bottom: 1px solid #ddd;\n      height: 60px; /* slightly increased header height */\n    }\n    .bizzai-clear-button {\n      background: transparent;\n      border: none;\n      cursor: pointer;\n      font-size: 20px; /* increased */\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      color: var(--bizzai-color, #4CAF50);\n      padding: 6px; /* increased */\n    }\n    .bizzai-clear-button svg {\n      width: 21px; /* increased */\n      height: 21px;\n      fill: var(--bizzai-color, #4CAF50);\n    }\n    .bizzai-close-button {\n      background: transparent;\n      border: none;\n      cursor: pointer;\n      font-size: 20px; /* increased */\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      color: var(--bizzai-color, #4CAF50);\n      padding: 6px; /* increased */\n    }\n    .bizzai-close-button svg {\n      width: 21px; /* increased */\n      height: 21px;\n      fill: var(--bizzai-color, #4CAF50);\n    }\n    .bizzai-chat-messages {\n      flex: 1;\n      padding: 10px;\n      overflow-y: auto;\n      font-size: 14px;\n      display: flex;\n      flex-direction: column;\n    }\n    .bizzai-chat-message {\n      margin: 10px 0;\n      padding: 8px 12px 18px;\n      border-radius: 12px;\n      max-width: 80%;\n      min-width: 60px;\n      clear: both;\n      word-wrap: break-word;\n      position: relative;\n      display: flex;\n      flex-direction: column;\n      font-size: 14px;\n    }\n    .bizzai-user-message {\n      align-self: flex-end;\n      background-color: #DCF8C6;\n    }\n    .bizzai-bot-message {\n      align-self: flex-start;\n      background-color: #F1F0F0;\n    }\n    .bizzai-chat-timestamp {\n      font-size: 10px;\n      color: #888;\n      position: absolute;\n      bottom: 2px;\n      right: 8px;\n    }\n    .bizzai-chat-input {\n      display: flex;\n      border-top: 1px solid #ddd;\n      border-radius: 0 0 10px 10px;\n      overflow: hidden;\n    }\n    .bizzai-chat-input input {\n      flex: 1;\n      border: none;\n      padding: 10px;\n      font-size: 14px;\n      outline: none;\n    }\n    .bizzai-chat-input button {\n      width: 40px;\n      height: 40px;\n      margin: 6px;\n      border-radius: 50%;\n      background: white;\n      color: white;\n      border: none;\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    .bizzai-chat-input button svg {\n      width: 20px;\n      height: 20px;\n      fill: var(--bizzai-color, #4CAF50);\n    }\n    .bizzai-typing-indicator {\n      display: flex;\n      gap: 4px;\n      align-items: flex-end;\n      height: 24px;\n      padding: 0 10px;\n    }\n    .bizzai-typing-indicator div {\n      width: 6px;\n      height: 6px;\n      background-color: #888;\n      border-radius: 50%;\n      animation: bizzai-bounce 1.2s infinite ease-in-out both;\n    }\n    .bizzai-typing-indicator div:nth-child(1) {\n      animation-delay: -0.24s;\n    }\n    .bizzai-typing-indicator div:nth-child(2) {\n      animation-delay: -0.12s;\n    }\n    .bizzai-typing-indicator div:nth-child(3) {\n      animation-delay: 0;\n    }\n    @keyframes bizzai-bounce {\n      0%, 80%, 100% { transform: scale(0); }\n      40% { transform: scale(1); }\n    }\n    .bizzai-chat-footer {\n      font-size: 11px;\n      color: #999;\n      text-align: center;\n      padding: 6px;\n      border-top: 1px solid #eee;\n      background: #fafafa;\n    }\n    .bizzai-chat-footer a {\n      color: #666;\n      text-decoration: none;\n    }\n    @media (max-width: 600px) {\n      .bizzai-chat-box {\n      bottom: 0 !important;\n      right: 0 !important;\n      top: 0 !important;\n      left: 0 !important;\n      width: 100vw !important;\n      height: 100vh !important;\n      border-radius: 0 !important;\n      border: none !important;\n      max-width: none !important;\n      max-height: none !important;\n      }\n      \n      .bizzai-chat-input {\n      flex-shrink: 0;\n      padding: 0 6px;\n      background: #fff;\n      }\n\n      .bizzai-chat-footer {\n      flex-shrink: 0;\n      background: #fafafa;\n      }\n    }\n    @media (max-width: 1024px) {\n      .bizzai-chat-box {\n      top: 0 !important;\n      left: 0 !important;\n      right: 0 !important;\n      bottom: 0 !important;\n      width: 100vw !important;\n      height: 100vh !important;\n      border-radius: 0 !important;\n      border: none !important;\n      max-width: none !important;\n      max-height: none !important;\n      }\n\n      .bizzai-chat-input {\n      flex-shrink: 0;\n      padding: 0 6px;\n      background: #fff;\n      }\n\n      .bizzai-chat-footer {\n      flex-shrink: 0;\n      background: #fafafa;\n      }\n      }\n  ",document.head.appendChild(n);const e={init({apiKey:n,backendUrl:e,color:t="#4CAF50",headerText:i="Chat with us",width:a="320px",height:o="400px"}){document.documentElement.style.setProperty("--bizzai-color",t),document.documentElement.style.setProperty("--bizzai-width",a),document.documentElement.style.setProperty("--bizzai-height",o);const r=document.createElement("div");r.className="bizzai-chat-button",r.innerText="💬",document.body.appendChild(r);const d=document.createElement("div");d.className="bizzai-chat-box",d.innerHTML=`\n        <div class="bizzai-chat-header">\n          <span>${i}</span>\n          <div>\n            <button class="bizzai-clear-button" title="Clear chat">\n              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor">\n                <path d="M9 3V4H4V6H5V20C5 21.1 5.9 22 7 22H17C18.1 22 19 21.1 19 20V6H20V4H15V3H9ZM7 6H17V20H7V6ZM9 8V18H11V8H9ZM13 8V18H15V8H13Z"/>\n              </svg>\n          </button>\n            <button class="bizzai-close-button" title="Close chat">\n              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor">\n                <path d="M18.3 5.71a1 1 0 0 0-1.41 0L12 10.59 7.11 5.7a1 1 0 0 0-1.41 1.41L10.59 12l-4.89 4.89a1 1 0 1 0 1.41 1.41L12 13.41l4.89 4.89a1 1 0 0 0 1.41-1.41L13.41 12l4.89-4.89a1 1 0 0 0 0-1.4z"/>\n              </svg>\n            </button>\n          </div>\n        </div>\n        <div class="bizzai-chat-messages"></div>\n        <div class="bizzai-chat-input">\n          <input type="text" placeholder="Type a message..." />\n          <button class="bizzai-send-btn" title="Send">\n            <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>\n          </button>\n        </div>\n        <div class="bizzai-chat-footer" style="display: flex; align-items: center; justify-content: center; gap: 6px;">\n          <span>Powered by</span>\n          <a href="https://convoai.chat" target="_blank" rel="noopener" style="display: inline-flex; align-items: center;">\n            <img src="https://hemantchhatbar.github.io/convoai-webui/static/ConvoAi.svg" alt="Logo" style="height: 16px;" />\n          </a>\n        </div>\n      `,document.body.appendChild(d);const s=d.querySelector(".bizzai-chat-messages"),l=d.querySelector("input"),c=d.querySelector(".bizzai-send-btn"),p=d.querySelector(".bizzai-clear-button"),h=d.querySelector(".bizzai-close-button");function b(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(n=>(n^crypto.getRandomValues(new Uint8Array(1))[0]&15>>n/4).toString(16)))}r.onclick=()=>{d.style.display="flex",r.style.display="none",s.innerHTML="",g=JSON.parse(localStorage.getItem("bizzai-history")||"[]"),g.forEach((({sender:n,text:e,timestamp:t})=>{u(n,e,t,!1)}))},h.onclick=()=>{r.style.display="block",d.style.display="none"};let z=localStorage.getItem("bizzai-user-id");var m;z||(m=b(),z=parseInt(m.replace(/\D/g,"").slice(0,15),10),localStorage.setItem("bizzai-user-id",z));let g=[];function x(){return(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function u(n,e,t=x(),i=!0){const a=document.createElement("div");a.className="bizzai-chat-message bizzai-"+n+"-message",a.textContent=e;const o=document.createElement("div");o.className="bizzai-chat-timestamp",o.textContent=t,a.appendChild(o),s.appendChild(a),s.scrollTop=s.scrollHeight,i&&function(n,e,t){g.push({sender:n,text:e,timestamp:t}),localStorage.setItem("bizzai-history",JSON.stringify(g))}(n,e,t)}function f(){const t=l.value.trim();if(!t)return;u("user",t,x()),l.value="";const i=document.createElement("div");i.className="bizzai-chat-message bizzai-bot-message";const a=document.createElement("div");a.className="bizzai-typing-indicator";for(let n=0;n<3;n++)a.appendChild(document.createElement("div"));i.appendChild(a),s.appendChild(i),s.scrollTop=s.scrollHeight;const o={userId:z,messageId:b(),messageType:"text",product:"ConvoAi-WebUI",category:"DM",messageText:t};fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(o)}).then((n=>n.json())).then((n=>{s.removeChild(i),u("bot",n.data?.ReplyText||"No reply")})).catch((()=>{s.removeChild(i),u("bot","⚠️ Could not connect to server.")}))}function y(){window.innerWidth<=1024?(mobileHeight=window.innerHeight-27,d.style.height=`${mobileHeight}px`):d.style.height=o}c.onclick=f,l.addEventListener("keypress",(n=>{"Enter"===n.key&&(n.preventDefault(),f())})),p.onclick=()=>{localStorage.removeItem("bizzai-history"),g=[],s.innerHTML=""},y(),window.addEventListener("resize",y)}};window.BizzAIChat=e}();