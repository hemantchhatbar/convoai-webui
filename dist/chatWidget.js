!function(){const n=document.createElement("style");n.innerHTML="\n    .bizzai-chat-button {\n      position: fixed;\n      bottom: 20px;\n      right: 20px;\n      z-index: 9999;\n      width: 60px;\n      height: 60px;\n      background-color: var(--bizzai-color, #4CAF50);\n      border-radius: 50%;\n      box-shadow: 0 4px 8px rgba(0,0,0,0.2);\n      color: white;\n      font-size: 30px;\n      text-align: center;\n      line-height: 60px;\n      cursor: pointer;\n    }\n    .bizzai-chat-box {\n      position: fixed;\n      bottom: 90px;\n      right: 20px;\n      width: var(--bizzai-width, 320px);\n      height: var(--bizzai-height, 400px);\n      border: 1px solid #ccc;\n      border-radius: 10px;\n      background: white;\n      display: none;\n      flex-direction: column;\n      box-shadow: 0 6px 16px rgba(0,0,0,0.3);\n      overflow: hidden;\n      font-family: sans-serif;\n      z-index: 9999;\n    }\n    .bizzai-chat-header {\n      background: var(--bizzai-color, #4CAF50);\n      color: white;\n      padding: 10px;\n      font-weight: bold;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n    .bizzai-clear-button {\n      background: transparent;\n      border: none;\n      color: white;\n      cursor: pointer;\n      font-size: 14px;\n    }\n    .bizzai-chat-messages {\n      flex: 1;\n      padding: 10px;\n      overflow-y: auto;\n      font-size: 14px;\n      display: flex;\n      flex-direction: column;\n    }\n    .bizzai-chat-message {\n      margin: 10px 0;\n      padding: 8px 12px 18px;\n      border-radius: 12px;\n      max-width: 80%;\n      min-width: 60px;\n      clear: both;\n      word-wrap: break-word;\n      position: relative;\n      display: flex;\n      flex-direction: column;\n      font-size: 14px;\n    }\n    .bizzai-user-message {\n      align-self: flex-end;\n      background-color: #DCF8C6;\n    }\n    .bizzai-bot-message {\n      align-self: flex-start;\n      background-color: #F1F0F0;\n    }\n    .bizzai-chat-timestamp {\n      font-size: 10px;\n      color: #888;\n      position: absolute;\n      bottom: 2px;\n      right: 8px;\n    }\n    .bizzai-chat-input {\n      display: flex;\n      border-top: 1px solid #ddd;\n    }\n    .bizzai-chat-input input {\n      flex: 1;\n      border: none;\n      padding: 10px;\n      font-size: 14px;\n      outline: none;\n    }\n    .bizzai-chat-input button {\n      background: var(--bizzai-color, #4CAF50);\n      color: white;\n      border: none;\n      padding: 10px 16px;\n      cursor: pointer;\n    }\n    .bizzai-typing-indicator {\n      display: flex;\n      gap: 4px;\n      align-items: flex-end;\n      height: 24px;\n      padding: 0 10px;\n    }\n    .bizzai-typing-indicator div {\n      width: 6px;\n      height: 6px;\n      background-color: #888;\n      border-radius: 50%;\n      animation: bizzai-bounce 1.2s infinite ease-in-out both;\n    }\n    .bizzai-typing-indicator div:nth-child(1) {\n      animation-delay: -0.24s;\n    }\n    .bizzai-typing-indicator div:nth-child(2) {\n      animation-delay: -0.12s;\n    }\n    .bizzai-typing-indicator div:nth-child(3) {\n      animation-delay: 0;\n    }\n    @keyframes bizzai-bounce {\n      0%, 80%, 100% {\n        transform: scale(0);\n      } \n      40% {\n        transform: scale(1);\n      }\n    }\n    .bizzai-chat-footer {\n      font-size: 11px;\n      color: #999;\n      text-align: center;\n      padding: 6px;\n      border-top: 1px solid #eee;\n      background: #fafafa;\n    }\n    .bizzai-chat-footer a {\n      color: #666;\n      text-decoration: none;\n    }\n  ",document.head.appendChild(n);const e={init({apiKey:n,backendUrl:e,color:t="#4CAF50",headerText:i="Chat with us",width:a="320px",height:o="400px"}){document.documentElement.style.setProperty("--bizzai-color",t),document.documentElement.style.setProperty("--bizzai-width",a),document.documentElement.style.setProperty("--bizzai-height",o);const r=document.createElement("div");r.className="bizzai-chat-button",r.innerText="💬",document.body.appendChild(r);const c=document.createElement("div");c.className="bizzai-chat-box",c.innerHTML=`\n        <div class="bizzai-chat-header">\n          ${i}\n          <button class="bizzai-clear-button">Clear</button>\n        </div>\n        <div class="bizzai-chat-messages"></div>\n        <div class="bizzai-chat-input">\n          <input type="text" placeholder="Type a message..." />\n          <button class="bizzai-send-btn">Send</button>\n        </div>\n        <div class="bizzai-chat-footer">Powered by <a href="https://convoai.chat" target="_blank" rel="noopener">ConvoAi.chat</a></div>\n      `,document.body.appendChild(c);const d=c.querySelector(".bizzai-chat-messages"),s=c.querySelector("input"),l=c.querySelector(".bizzai-send-btn"),p=c.querySelector(".bizzai-clear-button");function z(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(n=>(n^crypto.getRandomValues(new Uint8Array(1))[0]&15>>n/4).toString(16)))}r.onclick=()=>{const n="flex"===c.style.display;c.style.display=n?"none":"flex",r.innerText=n?"💬":"✖",n||(d.innerHTML="",u=JSON.parse(localStorage.getItem("bizzai-history")||"[]"),u.forEach((({sender:n,text:e,timestamp:t})=>{x(n,e,t,!1)})))};let b=localStorage.getItem("bizzai-user-id");var h;b||(h=z(),b=parseInt(h.replace(/\D/g,"").slice(0,15),10),localStorage.setItem("bizzai-user-id",b));let u=[];function m(){return(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function x(n,e,t=m(),i=!0){const a=document.createElement("div");a.className=`bizzai-chat-message bizzai-${n}-message`,a.textContent=e;const o=document.createElement("div");o.className="bizzai-chat-timestamp",o.textContent=t,a.appendChild(o),d.appendChild(a),d.scrollTop=d.scrollHeight,i&&function(n,e,t){u.push({sender:n,text:e,timestamp:t}),localStorage.setItem("bizzai-history",JSON.stringify(u))}(n,e,t)}function g(){const t=s.value.trim();if(!t)return;x("user",t,m()),s.value="";const i=document.createElement("div");i.className="bizzai-chat-message bizzai-bot-message";const a=document.createElement("div");a.className="bizzai-typing-indicator";for(let n=0;n<3;n++)a.appendChild(document.createElement("div"));i.appendChild(a),d.appendChild(i),d.scrollTop=d.scrollHeight;const o={userId:b,messageId:z(),messageType:"text",product:"ConvoAi-WebUI",category:"DM",messageText:t};fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(o)}).then((n=>n.json())).then((n=>{d.removeChild(i),x("bot",n.data.ReplyText||"No reply")})).catch((()=>{d.removeChild(i),x("bot","⚠️ Could not connect to server.")}))}l.onclick=g,s.addEventListener("keypress",(n=>{"Enter"===n.key&&(n.preventDefault(),g())})),p.onclick=()=>{localStorage.removeItem("bizzai-history"),u=[],d.innerHTML=""}}};window.BizzAIChat=e}();