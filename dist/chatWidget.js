!function(){const e=document.createElement("style");e.innerHTML="\n    .bizzai-chat-button {\n      position: fixed;\n      bottom: 20px;\n      right: 20px;\n      z-index: 9999;\n      width: 60px;\n      height: 60px;\n      background-color: var(--bizzai-color, #4CAF50);\n      border-radius: 50%;\n      box-shadow: 0 4px 8px rgba(0,0,0,0.2);\n      color: white;\n      font-size: 30px;\n      text-align: center;\n      line-height: 60px;\n      cursor: pointer;\n    }\n    .bizzai-chat-box {\n      position: fixed;\n      bottom: 90px;\n      right: 20px;\n      width: var(--bizzai-width, 320px);\n      height: var(--bizzai-height, 400px);\n      border: 1px solid #ccc;\n      border-radius: 10px;\n      background: white;\n      display: none;\n      flex-direction: column;\n      box-shadow: 0 6px 16px rgba(0,0,0,0.3);\n      overflow: hidden;\n      font-family: sans-serif;\n      z-index: 9999;\n    }\n    .bizzai-chat-header {\n      background: var(--bizzai-color, #4CAF50);\n      color: white;\n      padding: 10px;\n      font-weight: bold;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }\n    .bizzai-clear-button {\n      background: transparent;\n      border: none;\n      color: white;\n      cursor: pointer;\n      font-size: 14px;\n    }\n    .bizzai-chat-messages {\n      flex: 1;\n      padding: 10px;\n      overflow-y: auto;\n      font-size: 14px;\n      display: flex;\n      flex-direction: column;\n    }\n    .bizzai-chat-message {\n      margin: 10px 0;\n      padding: 8px 12px 18px;\n      border-radius: 12px;\n      max-width: 80%;\n      min-width: 60px;\n      clear: both;\n      word-wrap: break-word;\n      position: relative;\n      display: flex;              /* Ensures layout inside the bubble */\n      flex-direction: column;    /* Stack text and timestamp */\n      align-items: flex-end;   /* Align all content to the left */\n      font-size: 14px;\n    }\n    .bizzai-user-message {\n      align-self: flex-end;\n      background-color: #DCF8C6;\n    }\n    .bizzai-bot-message {\n      align-self: flex-start;\n      background-color: #F1F0F0;\n    }\n    .bizzai-chat-timestamp {\n      font-size: 10px;\n      color: #888;\n      position: absolute;\n      bottom: 2px;\n      right: 8px;\n    }\n    .bizzai-chat-input {\n      display: flex;\n      border-top: 1px solid #ddd;\n    }\n    .bizzai-chat-input input {\n      flex: 1;\n      border: none;\n      padding: 10px;\n      font-size: 14px;\n      outline: none;\n    }\n    .bizzai-chat-input button {\n      background: var(--bizzai-color, #4CAF50);\n      color: white;\n      border: none;\n      padding: 10px 16px;\n      cursor: pointer;\n    }\n  ",document.head.appendChild(e);const n={init({apiKey:e,backendUrl:n,color:t="#4CAF50",headerText:i="Chat with us",width:o="320px",height:a="400px"}){document.documentElement.style.setProperty("--bizzai-color",t),document.documentElement.style.setProperty("--bizzai-width",o),document.documentElement.style.setProperty("--bizzai-height",a);const r=document.createElement("div");r.className="bizzai-chat-button",r.innerText="💬",document.body.appendChild(r);const s=document.createElement("div");s.className="bizzai-chat-box",s.innerHTML=`\n        <div class="bizzai-chat-header">\n          ${i}\n          <button class="bizzai-clear-button">Clear</button>\n        </div>\n        <div class="bizzai-chat-messages"></div>\n        <div class="bizzai-chat-input">\n          <input type="text" placeholder="Type a message..." />\n          <button class="bizzai-send-btn">Send</button>\n        </div>\n      `,document.body.appendChild(s);const c=s.querySelector(".bizzai-chat-messages"),l=s.querySelector("input"),d=s.querySelector(".bizzai-send-btn"),p=s.querySelector(".bizzai-clear-button");function b(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}r.onclick=()=>{const e="flex"===s.style.display;s.style.display=e?"none":"flex",r.innerText=e?"💬":"✖",e||(c.innerHTML="",u=JSON.parse(localStorage.getItem("bizzai-history")||"[]"),u.forEach((({sender:e,text:n,timestamp:t})=>{m(e,n,t,!1)})))};let z=localStorage.getItem("bizzai-user-id");z||(z=b(),localStorage.setItem("bizzai-user-id",z));let u=[];function h(){return(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function m(e,n,t=h(),i=!0){const o=document.createElement("div");o.className=`bizzai-chat-message bizzai-${e}-message`,o.textContent=n;const a=document.createElement("div");a.className="bizzai-chat-timestamp",a.textContent=t,o.appendChild(a),c.appendChild(o),c.scrollTop=c.scrollHeight,i&&function(e,n,t){u.push({sender:e,text:n,timestamp:t}),localStorage.setItem("bizzai-history",JSON.stringify(u))}(e,n,t)}function x(){const t=l.value.trim();if(!t)return;m("user",t,h()),l.value="";const i=document.createElement("div");i.className="bizzai-chat-message bizzai-bot-message",i.textContent="Typing...",c.appendChild(i),c.scrollTop=c.scrollHeight;const o={userId:z,messageId:b(),messageType:"text",product:"ConvoAi-WebUI",category:"DM",messageText:t};fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(o)}).then((e=>e.json())).then((e=>{c.removeChild(i),m("bot",e.reply||"No reply")})).catch((()=>{c.removeChild(i),m("bot","⚠️ Could not connect to server.")}))}d.onclick=x,l.addEventListener("keypress",(e=>{"Enter"===e.key&&(e.preventDefault(),x())})),p.onclick=()=>{localStorage.removeItem("bizzai-history"),u=[],c.innerHTML=""}}};window.BizzAIChat=n}();